!function(){var e={apiUrl:"https://builder.memox.io/api/v1/prediction/832807e0-6eb1-45ae-ab90-1bc0a18e8487",title:"Chat",theme:{primary:"#0078d4",userBubble:"#e6f0fa",botBubble:"#f1f1f1",userText:"#22223b",botText:"#4a4e69",background:"#fff",border:"#ccc",text:"#222",width:"100%",maxWidth:"350px",minWidth:"220px",borderRadius:"8px",fontFamily:"sans-serif",zIndex:9999,headerText:"#fff",headerBg:"rgba(34, 34, 59, 0.95)",inputBg:"#fff",inputText:"#222",sendBtnBg:"#0078d4",sendBtnText:"#fff",sendBtnHover:"#005fa3",shadow:"0 2px 8px rgba(0,0,0,0.15)"}},t=window.SimpleChatEmbedConfig?{...e,...window.SimpleChatEmbedConfig,theme:{...e.theme,...window.SimpleChatEmbedConfig.theme||{}}}:e,n=t.theme,s=t.apiUrl,l=t.welcomeMessage||null,r=document.createElement("div");function i(){window.innerWidth<500?(r.style.width="98vw",r.style.right="1vw",r.style.left="1vw",r.style.bottom="0",r.style.borderRadius="8px 8px 0 0",r.style.minWidth="0"):(r.style.width=n.width,r.style.right="20px",r.style.left="",r.style.bottom="20px",r.style.borderRadius=n.borderRadius,r.style.minWidth=n.minWidth)}r.id="simple-chat-embed",r.style.position="fixed",r.style.bottom="24px",r.style.right="24px",r.style.width=n.width,r.style.maxWidth=n.maxWidth,r.style.minWidth=n.minWidth,r.style.background=n.background,r.style.border="1px solid "+n.border,r.style.borderRadius="1rem",r.style.boxShadow="0 8px 32px 0 rgba(31, 38, 135, 0.15)",r.style.fontFamily=n.fontFamily+", Inter, system-ui, sans-serif",r.style.zIndex=n.zIndex,r.style.color=n.text,r.style.transition="width 0.2s, box-shadow 0.2s",r.style.display="flex",r.style.flexDirection="column",r.style.height="60vh",r.style.maxHeight="80vh",r.style.overflow="hidden",i(),window.addEventListener("resize",i);var o=document.createElement("div");o.style.display="flex",o.style.justifyContent="space-between",o.style.alignItems="center",o.style.background=n.headerBg||"rgba(34, 34, 59, 0.95)",o.style.color=n.headerText,o.style.padding="0.75rem 1.25rem",o.style.borderTopLeftRadius="1rem",o.style.borderTopRightRadius="1rem",o.style.fontWeight="600",o.style.letterSpacing="0.01em",o.style.fontSize="1.1rem",o.style.boxShadow="0 1px 0 0 #ececec";var a=document.createElement("span");a.innerText=t.title,o.appendChild(a);var d=document.createElement("button");d.innerText="⟳",d.title="Clear chat",d.style.background="transparent",d.style.color=n.headerText,d.style.border="none",d.style.fontSize="1.2rem",d.style.cursor="pointer",d.style.marginLeft="10px",d.style.transition="color 0.15s",d.onmouseover=function(){d.style.color="#a3a3a3"},d.onmouseout=function(){d.style.color=n.headerText},d.onclick=function(){localStorage.removeItem("simple-chat-messages"),x()},o.appendChild(d),r.appendChild(o);var y=document.createElement("div");y.style.flex="1",y.style.overflowY="auto",y.style.padding="1.25rem 1rem",y.style.background="#f8fafc",y.id="chat-messages",y.style.display="flex",y.style.flexDirection="column",y.style.gap="0.5rem",r.appendChild(y);var c=document.createElement("div");c.style.display="flex",c.style.flexDirection="row",c.style.alignItems="stretch",c.style.borderTop="1px solid #ececec",c.style.background="#ffffff",c.style.padding="0.5rem",c.style.boxSizing="border-box",c.style.gap="0",c.style.width="100%",c.style.flex="0 0 auto";var m=document.createElement("input");m.type="text",m.placeholder="Type a message…",m.style.flex="1 1 0%",m.style.minWidth="0",m.style.width="100%",m.style.margin="0",m.style.height="2.5rem",m.style.padding="0 2.2rem 0 1rem",m.style.border="1px solid #ececec",m.style.borderRight="none",m.style.borderRadius="0.75rem 0 0 0.75rem",m.style.background=n.inputBg,m.style.color=n.inputText,m.style.fontSize="1rem",m.style.boxSizing="border-box",m.style.outline="none",m.style.transition="border 0.15s ease-in-out",m.addEventListener("focus",function(){m.style.border="1.5px solid #a3a3a3",m.style.borderRight="none"}),m.addEventListener("blur",function(){m.style.border="1px solid #ececec",m.style.borderRight="none"});var p=document.createElement("button");p.title="Send",p.innerHTML='<svg width="18" height="18" viewBox="0 0 20 20" fill="none"  xmlns="http://www.w3.org/2000/svg">  <path d="M2.5 17.5L17.5 10L2.5 2.5V8.33333L13.3333 10L2.5 11.6667V17.5Z"         fill="currentColor"/></svg>',p.style.flex="0 0 auto",p.style.margin="0",p.style.height="2.5rem",p.style.padding="0 1.25rem",p.style.background=n.sendBtnBg,p.style.color=n.sendBtnText,p.style.border="1px solid #ececec",p.style.borderLeft="none",p.style.borderRadius="0 0.75rem 0.75rem 0",p.style.cursor="pointer",p.style.fontWeight="600",p.style.fontSize="1rem",p.style.transition="background 0.15s ease-in-out, color 0.15s ease-in-out",p.style.boxSizing="border-box",p.style.display="flex",p.style.justifyContent="center",p.style.alignItems="center",p.addEventListener("mouseover",function(){p.style.background=n.sendBtnHover}),p.addEventListener("mouseout",function(){p.style.background=n.sendBtnBg}),c.style.position="relative";var $=document.createElement("input");$.type="file",$.accept="image/*",$.style.display="none";var g=document.createElement("button");g.title="Send image",g.innerHTML='<svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 10.5L13.5 4.5C14.3284 3.67157 15.6716 3.67157 16.5 4.5C17.3284 5.32843 17.3284 6.67157 16.5 7.5L8.5 15.5C6.84315 17.1569 4.15685 17.1569 2.5 15.5C0.843146 13.8431 0.843146 11.1569 2.5 9.5L10.5 1.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',g.style.position="absolute",g.style.left="8px",g.style.top="50%",g.style.transform="translateY(-50%)",g.style.height="2rem",g.style.width="2rem",g.style.background="transparent",g.style.color=n.inputText,g.style.border="none",g.style.borderRadius="0.5rem",g.style.cursor="pointer",g.style.display="flex",g.style.justifyContent="center",g.style.alignItems="center",g.style.transition="background 0.15s, color 0.15s",g.onmouseover=function(){g.style.background="#ececec"},g.onmouseout=function(){g.style.background="transparent"},g.onclick=function(){$.click()},c.appendChild(g),c.appendChild($),m.style.paddingLeft="2.5rem",m.style.setProperty("text-indent","1.5rem"),$.addEventListener("change",function(e){var t=$.files[0];if(t){if(t.size>5242880){_("Image too large (max 5MB).","bot"),x();return}var n=new FileReader;n.onload=function(e){var n=e.target.result;_("[Image]","user"),x(),v&&w&&1===w.readyState?w.send(JSON.stringify({type:"image",data:n,filename:t.name})):fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:n,filename:t.name})}).then(e=>e.json()).then(e=>{_(e.text||e.answer||"[Image received]","bot"),x()}).catch(()=>{_("Error sending image.","bot"),x()})},n.readAsDataURL(t),$.value=""}}),c.appendChild(m),c.appendChild(p),r.appendChild(c);var u=document.createElement("div");async function f(e,t){let n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.body||!window.ReadableStream){let l=await n.json();t(l.text||l.answer||JSON.stringify(l),!0);return}let r=n.body.getReader(),i=new TextDecoder,o=!1,a="",d="";for(;!o;){let{value:y,done:c}=await r.read();if(o=c,y){let m=i.decode(y,{stream:!o}),p=a+=m;try{let $=JSON.parse(a);$&&"string"==typeof $.text&&(p=$.text)}catch(g){}p!==d&&(t(p,!1),d=p)}}t(d,!0)}function h(){var e=document.createElement("span");e.style.display="inline-flex",e.style.alignItems="center",e.style.height="1.5em";var t=n.botText||"#4a4e69";if(e.innerHTML=`
      <span style="display:inline-block;width:8px;height:8px;margin:0 2px;background:${t};border-radius:50%;animation:bounce 1s infinite alternate;"></span>
      <span style="display:inline-block;width:8px;height:8px;margin:0 2px;background:${t};border-radius:50%;animation:bounce 1s 0.2s infinite alternate;"></span>
      <span style="display:inline-block;width:8px;height:8px;margin:0 2px;background:${t};border-radius:50%;animation:bounce 1s 0.4s infinite alternate;"></span>
    `,!document.getElementById("simple-chat-bounce-style")){var s=document.createElement("style");s.id="simple-chat-bounce-style",s.innerHTML="@keyframes bounce { 0% { transform: translateY(0); } 100% { transform: translateY(-7px); } }",document.head.appendChild(s)}return e}function b(e){return e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,function(e,t,s){return'<a href="'+s+'" target="_blank" style="font-weight:bold;color:'+(n.botText||"#4a4e69")+';text-decoration:underline;cursor:pointer;">'+t+"</a>"})}function x(){var e=JSON.parse(localStorage.getItem("simple-chat-messages")||"[]");y.innerHTML="";for(var t=0;t<e.length;t++){var s=e[t],l=document.createElement("div");l.style.margin="0",l.style.padding="0.75rem 1rem",l.style.borderRadius="1rem",l.style.maxWidth="66%",l.style.wordBreak="break-word",l.style.display="block",l.style.minWidth="fit-content",l.style.boxSizing="border-box",l.style.fontSize="0.97rem",l.style.lineHeight="1.7",l.style.boxShadow="0 1px 2px 0 #ececec";var r=document.createElement("div");if(r.style.display="flex",r.style.width="100%","user"===s.sender)l.style.background=n.userBubble,l.style.color=n.userText||"#22223b",r.style.justifyContent="flex-end",l.innerText=s.text;else if(l.style.background=n.botBubble,l.style.color=n.botText||"#4a4e69",r.style.justifyContent="flex-start",""===s.text&&t===e.length-1)l.appendChild(h());else if("[Image]"===s.text&&t>0&&isImageDataUrl(e[t-1].text)){var i=document.createElement("img");i.src=e[t-1].text,i.style.maxWidth="180px",i.style.maxHeight="120px",i.style.borderRadius="0.75rem",i.style.display="block",i.style.margin="0.25rem 0",l.appendChild(i)}else l.innerHTML=b(s.text);r.appendChild(l),y.appendChild(r)}y.scrollTop=y.scrollHeight}function _(e,t,n=""){var s=JSON.parse(localStorage.getItem("simple-chat-messages")||"[]");if("welcomeMessage"===n){let l=s.findIndex(e=>e.isWelcomeMessage);console.log(l,"welcome message index"),-1!==l?s[l].text=e:s.push({text:e,isWelcomeMessage:!0,sender:t})}else s.push({text:e,isWelcomeMessage:!1,sender:t});localStorage.setItem("simple-chat-messages",JSON.stringify(s))}u.style.textAlign="center",u.style.fontSize="0.85rem",u.style.color="#a3a3a3",u.style.padding="0.25rem 0 0.75rem 0",u.innerHTML='Powered by <a href="https://memox.com" target="_blank" style="color:#4a4e69;text-decoration:none;font-weight:600;">memox</a>',r.appendChild(u),document.body.appendChild(r);var v=!1,w=null;async function k(){var e=m.value.trim();if(e){if(_(e,"user"),m.value="",x(),v&&w&&1===w.readyState){w.send(e);return}_("","bot"),x();try{let t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})}),n=await t.json(),l=n.text||n.answer||JSON.stringify(n);var r,i,o,a,d,y=JSON.parse(localStorage.getItem("simple-chat-messages")||"[]");r=y.length-1,o=(i=l).split(/(\s+)/g),a="",d=0,function e(){if(d<=o.length){a=o.slice(0,d).join("");var t=JSON.parse(localStorage.getItem("simple-chat-messages")||"[]");t[r]&&"bot"===t[r].sender&&(t[r].text=a,localStorage.setItem("simple-chat-messages",JSON.stringify(t)),x()),d++,setTimeout(e,60)}}()}catch(c){var y=JSON.parse(localStorage.getItem("simple-chat-messages")||"[]");y.length&&"bot"===y[y.length-1].sender&&(y[y.length-1].text="Error contacting bot.",localStorage.setItem("simple-chat-messages",JSON.stringify(y)),x())}}}function C(e){return String(e).replace(/[&<>"']/g,function(e){return({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]})}window.SimpleChatEmbedSwitchToHuman=function e(t,n){if(!v){v=!0,_("You are now chatting with a human agent.","bot"),x(),w&&w.close();var s=t;n&&(s+=(-1===t.indexOf("?")?"?":"&")+"token="+encodeURIComponent(n)),(w=new WebSocket(s)).onopen=function(){},w.onmessage=function(e){var t=e.data;try{var n=JSON.parse(t);n.text&&(t=n.text)}catch(s){}_(t,"bot"),x()},w.onclose=function(){_("The human agent has left the chat.","bot"),x(),v=!1,w=null},w.onerror=function(e){_("Connection error with human agent.","bot"),x()}}},p.onclick=k,m.addEventListener("keydown",function(e){"Enter"===e.key&&k()}),!function e(){if(window.__simpleChatEmbedLeadCaptured)c.style.display="flex",c.style.flexDirection="row",c.style.width="100%",c.style.boxSizing="border-box",c.style.padding="0.5rem",c.style.gap="0",c.style.alignItems="stretch",c.style.flex="0 0 auto",c.style.borderTop="1px solid #ececec",c.style.background="#ffffff",m.style.flex="1 1 0%",m.style.minWidth="0",m.style.width="auto",m.style.margin="0",m.style.height="2.5rem",m.style.padding="0 1rem",m.style.border="1px solid #ececec",m.style.borderRight="none",m.style.borderRadius="0.75rem 0 0 0.75rem",m.style.background=n.inputBg,m.style.color=n.inputText,m.style.fontSize="1rem",m.style.boxSizing="border-box",m.style.outline="none",m.style.transition="border 0.15s ease-in-out",p.style.flex="0 0 auto",p.style.margin="0",p.style.height="2.5rem",p.style.padding="0 1.25rem",p.style.background=n.sendBtnBg,p.style.color=n.sendBtnText,p.style.border="1px solid #ececec",p.style.borderLeft="none",p.style.borderRadius="0 0.75rem 0.75rem 0",p.style.cursor="pointer",p.style.fontWeight="600",p.style.fontSize="1rem",p.style.transition="background 0.15s ease-in-out, color 0.15s ease-in-out",p.style.boxSizing="border-box",p.style.display="flex",p.style.justifyContent="center",p.style.alignItems="center",u.style.display="",x();else{var t,s,r,i,o,a,d,$,g,f;c.style.display="none",u.style.display="none",t=function(e){window.__simpleChatEmbedLeadCaptured=!0,e&&(window.SimpleChatEmbedLead=e),c.style.display="flex",c.style.flexDirection="row",c.style.width="100%",c.style.boxSizing="border-box",c.style.padding="0.5rem",c.style.gap="0",c.style.alignItems="stretch",c.style.flex="0 0 auto",c.style.borderTop="1px solid #ececec",c.style.background="#ffffff",m.style.flex="1 1 0%",m.style.minWidth="0",m.style.width="auto",m.style.margin="0",m.style.height="2.5rem",m.style.padding="0 1rem",m.style.border="1px solid #ececec",m.style.borderRight="none",m.style.borderRadius="0.75rem 0 0 0.75rem",m.style.background=n.inputBg,m.style.color=n.inputText,m.style.fontSize="1rem",m.style.boxSizing="border-box",m.style.outline="none",m.style.transition="border 0.15s ease-in-out",p.style.flex="0 0 auto",p.style.margin="0",p.style.height="2.5rem",p.style.padding="0 1.25rem",p.style.background=n.sendBtnBg,p.style.color=n.sendBtnText,p.style.border="1px solid #ececec",p.style.borderLeft="none",p.style.borderRadius="0 0.75rem 0.75rem 0",p.style.cursor="pointer",p.style.fontWeight="600",p.style.fontSize="1rem",p.style.transition="background 0.15s ease-in-out, color 0.15s ease-in-out",p.style.boxSizing="border-box",p.style.display="flex",p.style.justifyContent="center",p.style.alignItems="center",u.style.display="";var t=JSON.parse(localStorage.getItem("simple-chat-messages")||"[]");console.log(t,"my messages"),l&&_(l,"bot","welcomeMessage"),x()},y.innerHTML="",(s=document.createElement("div")).style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.justifyContent="center",s.style.height="100%",s.style.width="100%",s.style.gap="1.2rem",(r=document.createElement("div")).innerText="Enter to Chat",r.style.fontWeight="600",r.style.fontSize="1.2rem",r.style.marginBottom="0.5rem",s.appendChild(r),(i=document.createElement("input")).type="text",i.placeholder="Your name",i.style.padding="0.75rem 1rem",i.style.border="1px solid #ececec",i.style.borderRadius="0.75rem",i.style.fontSize="1rem",i.style.width="100%",i.style.maxWidth="260px",s.appendChild(i),(o=document.createElement("input")).type="email",o.placeholder="Email address",o.style.padding="0.75rem 1rem",o.style.border="1px solid #ececec",o.style.borderRadius="0.75rem",o.style.fontSize="1rem",o.style.width="100%",o.style.maxWidth="260px",s.appendChild(o),(a=document.createElement("div")).style.display="none",a.style.color="#e57373",a.style.fontSize="0.95rem",a.style.fontStyle="italic",a.style.marginTop="0.25rem",a.style.marginBottom="-0.5rem",a.innerText="please enter a valid email address",s.appendChild(a),(d=document.createElement("div")).style.display="flex",d.style.gap="0.5rem",d.style.width="100%",d.style.justifyContent="space-between",d.style.maxWidth="260px",($=document.createElement("button")).innerText="Enter Chat",$.style.background=n.primary,$.style.color="#fff",$.style.border="none",$.style.borderRadius="0.75rem",$.style.padding="0.75rem 1.25rem",$.style.cursor="pointer",$.style.fontWeight="600",$.style.fontSize="1rem",$.style.transition="background 0.15s, color 0.15s",$.onmouseover=function(){$.style.background=n.sendBtnHover},$.onmouseout=function(){$.style.background=n.primary},$.onclick=function(){var e=o.value.trim();if(e&&!/^\S+@\S+\.\S+$/.test(e)){o.style.border="1.5px solid #e57373",a.style.display="block",o.focus();return}o.style.border="1px solid #ececec",a.style.display="none",y.innerHTML="";var n=navigator.userAgent,s=navigator.platform,l=window.location.href,r=new Date().toISOString(),d=navigator.language,c=document.referrer;fetch("https://api.ipify.org?format=json").then(function(e){return e.json()}).then(function(e){var a=e.ip||"",y=localStorage.getItem("simple-chat-user-guid");y||(y="10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),localStorage.setItem("simple-chat-user-guid",y));var m={name:C(i.value),email:C(o.value),timestamp:r,userAgent:n,platform:s,url:l,language:d,referrer:c,guid:y,ip:a},p=JSON.parse(localStorage.getItem("simple-chat-leads")||"[]");p.push(m),localStorage.setItem("simple-chat-leads",JSON.stringify(p)),console.log("Lead captured:",m),t(m)})},i.addEventListener("keydown",function(e){"Enter"===e.key&&$.click()}),o.addEventListener("keydown",function(e){"Enter"===e.key&&$.click()}),d.appendChild($),(g=document.createElement("button")).innerText="Skip",g.style.background="#222",g.style.color="#fff",g.style.border="none",g.style.borderRadius="0.75rem",g.style.padding="0.75rem 1.25rem",g.style.cursor="pointer",g.style.fontWeight="600",g.style.fontSize="1rem",g.style.transition="background 0.15s, color 0.15s",g.onmouseover=function(){g.style.background="#444"},g.onmouseout=function(){g.style.background="#222"},g.onclick=function(){y.innerHTML="";var e={name:"",email:"",skipped:!0,timestamp:new Date().toISOString()},n=JSON.parse(localStorage.getItem("simple-chat-leads")||"[]");n.push(e),localStorage.setItem("simple-chat-leads",JSON.stringify(n)),console.log("Lead skipped:",e),t(null)},d.appendChild(g),s.appendChild(d),y.appendChild(s),i.focus(),(f=document.createElement("div")).style.fontSize="0.85rem",f.style.color="#888",f.style.textAlign="center",f.style.maxWidth="260px",f.style.marginTop="0.5rem",f.innerHTML='By continuing, you agree to our <a href="https://memox.com/privacy" target="_blank" style="color:#4a4e69;text-decoration:underline;">Privacy Policy</a>.',s.appendChild(f)}}()}();